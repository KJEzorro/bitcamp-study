<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>연락처</title>
</head>

<body>
  <h1>연락처</h1>
  <a href="form2.html">새 연락처</a>
  <table id="x-contact-tbl" border="5">
    <thead>
      <tr>
        <th>이름</th>
        <th>이메일</th>
        <th>전화</th>
        <th>회사</th>
      </tr>
    </thead>
    <tbody>
      <tr>
      </tr>
    </tbody>
  </table>

  <script>
    var tbody = document.querySelector("#x-contact-tbl tbody")

    fetch("/contact/list2")
      .then(function(response) {
        // response.json() = json데이터를 js객체로 변환
        return response.json()
      })
      .then(function(arr) {
        for (var str of arr) {
          console.log(str)
          var contact = str.split(",")
          var tr = document.createElement("tr")
          tr.innerHTML = `
        <td><a href="view2.html?email=${contact[1]}">${contact[0]}</a></td>
        <td>${contact[1]}</td>
        <td>${contact[2]}</td>
        <td>${contact[3]}</td>`
          tbody.appendChild(tr)
        }

      })
  </script>

</body>

</html>










<!--  -->
